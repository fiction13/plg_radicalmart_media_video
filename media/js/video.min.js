"use strict";window.RadicalMartFieldGalleryVideo={select(e){let t=e.closest('[radicalmart-field-gallery="container"]');if(t){let e=Joomla.selectedMediaFile;if(e&&e.path){let l=Joomla.getOptions("system.paths").baseFull+"index.php?option=com_media&task=api.files&url=true&path="+e.path+"&mediatypes=0&"+Joomla.getOptions("csrf.token")+"=1&format=json";fetch(l,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){e.json().then((e=>{if(e.data.length>0){let l=e.data[0];if(l.url&&l.mime_type.includes("video/")){let e=Joomla.getOptions("system.paths").rootFull,a=l.url.split(e);if(a.length>1){let e=a[1],o=Joomla.Modal.getCurrent();o&&o.close();let r=window.RadicalMartFieldGallery.getTypeTemplate(t,"video");if(r){r.querySelector('input[data-name*="[type]"]').value="video",r.querySelector('input[data-name*="[src]"]').value=e;let a=r.querySelector('[radicalmart-field-gallery="preview"]');a&&a.setAttribute("src",l.url),window.RadicalMartFieldGallery.appendItem(t,r)}}}}}))}))}}}},document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll('[radicalmart-field-gallery="container"]').forEach((e=>{let t=e.querySelector('[id*="_modal_type_video"]');t&&t.addEventListener("shown.bs.modal",(e=>{let t=e.target.querySelector("iframe");Joomla.Modal.setCurrent(e.target),t&&t.addEventListener("load",(()=>{let l=t.contentWindow;l&&l.Joomla.Modal.setCurrent(e.target)}))}))}))}));